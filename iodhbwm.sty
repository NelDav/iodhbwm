\newcommand*{\@iodhbwm@version}{v0.1}
\newcommand*{\@iodhbwm@date}{2017-09-01}
\newcommand*{\@iodhbwm@info}{Inoffical DHBW Mannheim thesis package}

\ProvidesPackage{iodhbwm}[%
    \@iodhbwm@date\space
    \@iodhbwm@version\space
    \@iodhbwm@info]
\RequirePackage{etoolbox, pgfopts}

%---------------------------------------------------
% Defining package options
%---------------------------------------------------
\newbool{dhbw@if@prettyfont}

\pgfkeys{
    dhbw/.cd,
    pretty-font/.is choice,
    pretty-font/true/.code = {\booltrue{dhbw@if@prettyfont}},
    pretty-font/false/.code= {\boolfalse{dhbw@if@prettyfont}},
    pretty-font/.initial = true,
    titlepage/.store in = \@iodhbwm@file@titlepage,
    titlepage/.default = dhbw-titlepage.def,
    titlepage = dhbw-titlepage.def,
    declaration/.store in = \@iodhbwm@file@declaration,
    declaration/.default = dhbw-declaration.def,
    declaration = dhbw-declaration.def
}

\newrobustcmd\dhbwsetup[1]{\pgfqkeys{/dhbw}{#1}}

\ProcessPgfOptions{/dhbw}

%---------------------------------------------------
% Defining package commands
%---------------------------------------------------
%    \AtEndPreamble{
%        \ifbool{dhbw@if@prettyfont}{%
%            \RequirePackage{lmodern}%
%        }{}
%    }

% DEBUG
\newcommand{\testfont}{\ifbool{dhbw@if@prettyfont}{true}{false}}
\newcommand{\testmatrikel}{\ifdefempty{\iodhbwm@matrikel@nummer}{true}{false}}

\newcommand{\iodhbwm@matrikel@nummer}{}
\newcommand{\iodhwm@kurs}{}
\newcommand{\iodhwm@ort}{}
\newcommand{\iodhwm@betreuer}{}
\newcommand{\iodhwm@firma}{}
\newcommand{\iodhwm@firma@logo}{}
\newcommand{\iodhwm@thema}{}
\newcommand{\iodhwm@start@datum}{}
\newcommand{\iodhwm@end@datum}{}
\newcommand{\iodhwm@abteilung}{}

\newcommand{\studentid}[1]{\renewcommand{\iodhbwm@matrikel@nummer}{#1}}

\newcommand{\dhbwtitlepage}{%
    \InputIfFileExists{\@iodhbwm@file@titlepage}{}{%
        \input{\pgfkeysvalueof{/dhbw/titlepage/.@def}}%
        \PackageWarning{iodhbwm}{The passed titlepage file `\@iodhbwm@file@titlepage` was not found. Used default instead.}
    }%
}
\newcommand{\dhbwdeclaration}{%
    \InputIfFileExists{\@iodhbwm@file@declaration}{}{%
        \input{\pgfkeysvalueof{/dhbw/declaration/.@def}}%
        \PackageWarning{iodhbwm}{The passed declaration file `\@iodhbwm@file@declaration` is unknown. Used default instead.}
    }%
}